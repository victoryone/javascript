!function(a,b,c){"use strict";var d=(b.browser,b.string.byteLength),e=b.string.charsByByte,f=c("TextCounter",{$statics:{ON_TEXTCOUNT_CHANGE:"textcounterchange"},defaults:{countType:"char",limit:100},initialize:function(a,c){var d=this;d.callParent(a,c),d.currentLength=0,d.placeholder=d.$el.getPlaceholder(),b.browser.isGecko&&d._forceKeyup(),d.on("keydown keyup cut paste blur",function(a){var b=d._checkLimit();("keyup"===a.type||"paste"===a.type)&&b&&(alert("입력하신 글자 수가 초과되었습니다."),this.focus()),d.trigger("textcounterchange",[d.currentLength])}),d._checkLimit(),d.trigger("textcounterchange",[d.currentLength])},textLength:function(a){var b=this;return"byte"===b.options.countType?d(a):(a||"").length},_checkLimit:function(){var a=this,b=a.options,c=!1;return a.currentLength=a.textLength(a.$el.trimVal()),a.currentLength>b.limit&&(a._truncateValue(),c=!0),c},_truncateValue:function(){var a=this,b=a.$el,c=b.trimVal(),f=a.options.limit,g="byte"===a.options.countType,h=0;0===f?(b[0].value=a.placeholder,a.currentLength=f):f<a.currentLength&&(h=g?e(c,f):f,b[0].blur(),b[0].value=c.substring(0,h),b[0].focus(),a.currentLength=g?d(b[0].value):f)},_forceKeyup:function(){var a,b=this,c=b.$el,d=c[0],e=window,f=document,g=function(){return f.createEvent?function(){var a;e.KeyEvent?(a=f.createEvent("KeyEvents"),a.initKeyEvent("keyup",!0,!0,e,!1,!1,!1,!1,65,0)):(a=f.createEvent("UIEvents"),a.initUIEvent("keyup",!0,!0,e,1),a.keyCode=65),d.dispatchEvent(a)}:function(){var a=f.createEventObject();a.keyCode=65,d.fireEvent("onkeyup",a)}}();b.timer=null,b.on("focus",function(){b.timer||(b.timer=setInterval(function(){a!==d.value&&(a=d.value,g())},60))}).on("blur",function(){b.timer&&(clearInterval(b.timer),b.timer=null)})},release:function(){var a=this;a.timer&&clearInterval(a.timer),a.callParent()}}),g=c("TextControl",{$extend:f,$statics:{ON_INIT:"init",ON_CHANGE:"textcontrolchange"},bindjQuery:"textControl",defaults:{limit:100,checkCount:!0,countTarget:"",countText:"<strong>{len}</strong> / {limit}자",autoResize:!1,allowPaste:!0},initialize:function(a,b){var c=this;c.callParent(a,b)!==!1&&(c._initTextControl(),c.trigger(g.ON_INIT))},_initTextControl:function(){var c=this,d=c.options;d.allowPaste||c.on("paste",function(a){a.preventDefault(),alert("죄송합니다. \n도배글 등을 방지하기 위해 붙여넣기를 하실 수 없습니다.")}),c.$el.is("textarea")&&d.autoResize&&c._autoResize(),d.checkCount&&c.on("textcounterchange",function(){var e=a(c.options.countTarget),f=b.string,g=b.number,h=function(a,b){e.html(f.format(c.options.countText,{len:g.addComma(a)||0,limit:g.addComma(b)||0}))};return h(c.currentLength,d.limit),function(){c.$el.val()!==c.$el.getPlaceholder()&&h(c.currentLength,d.limit)}}())},_autoResize:function(){var a,c,d=this,e=b.browser.isOldIE,f=0;d.$el.css({overflow:"hidden",resize:"none"}),a=e?d.$el.clone().removeAttr("name").removeAttr("id").addClass("d-tmp-textarea").val("").appendTo(d.$el.parent()):d.$el,c=a.height(),a[0].scrollHeight,a[0].scrollHeight!==c&&(f=a.innerHeight()-c),e&&a.hide(),d.on("keyup change input paste focusin focusout",function(){this._layout(this,this.$el,a,c,f)}.bind(d)),d._layout(d,d.$el,a,c,f)},_layout:function(a,c,d,e,f){var h,i,a=this,j=c.val(),k=a.prevVal,l=b.browser.isOldIE;j!==k&&(a.prevVal=j,d.css("height",""),l&&d.val(j).show()[0].scrollHeight,h=d[0].scrollHeight,i=h-f,l&&d.hide(),c.height(i=Math.max(i,e)),a.triggerHandler(g.ON_CHANGE,[i]))},release:function(){var a=this;a.callParent()}});g.prototype.defaults.countText="{len} / {limit}byte"}(jQuery,window[LIB_NAME],window[LIB_NAME].ui);