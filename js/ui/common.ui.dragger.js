!function(a,b,c,d){"use strict";var e=function(){return{x:a.pageXOffset!==d?a.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:a.pageYOffset!==d?a.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}};document.onselectstart=function(){return!1};var f=ui("Dragger",{defaults:{start:null,drag:null,stop:null,initX:0,initY:0,allowVerticalScrolling:!0,allowHorizontalScrolling:!0,bounds:{minX:null,maxX:null,minY:null,maxY:null}},initialize:function(a,c){var d=this;d.callParent(a,c)!==!1&&(d.bounds=b.extend({},d.defaults.bounds,d.options.bounds),d.dragStart={x:0,y:0,diffX:0,diffY:0,scrollX:0,scrollY:0},d.isDragging=!1,d.isScrolling=!1,d.$el.css("msTouchAction","none"),d.bindEvents(),d.enabled=!0)},bindEvents:function(){var a=this;a.$el.on("mousedown",a._eventMouseDown.bind(a)),c.$doc.on("mousemove",a._eventMouseMove.bind(a)),c.$doc.on("mouseup",a._eventMouseUp.bind(a)),a.$el.on("touchstart",a._eventTouchStart.bind(a)),a.$el.on("touchmove",a._eventTouchMove.bind(a)),a.$el.on("touchend",a._eventTouchEnd.bind(a)),a.$el.on("click",a._preventClickWhenDrag.bind(a))},unbindEvents:function(){me.$el.off("mousedown",me._eventMouseDown.bind(me)),c.$doc.off("mousemove",me._eventMouseMove.bind(me)),c.$doc.off("mouseup",me._eventMouseUp.bind(me)),me.$el.off("touchstart",me._eventTouchStart.bind(me)),me.$el.off("touchmove",me._eventTouchMove.bind(me)),me.$el.off("touchend",me._eventTouchEnd.bind(me)),me.$el.off("click",me._preventClickWhenDrag.bind(me))},setBounds:function(a){b.extend(this.bounds,a)},preventDragStart:function(a){a.preventDefault()},hasDragged:function(){return 0!==this.dragStart.diffX||0!==this.dragStart.diffY},getNewPos:function(a){var b,c,d,e;return b=a.x-this.dragStart.x,c=a.y-this.dragStart.y,this.dragStart.diffX=b,this.dragStart.diffY=c,d=b,e=c,"number"==typeof this.bounds.minX&&(d=Math.max(d,this.bounds.minX)),"number"==typeof this.bounds.maxX&&(d=Math.min(d,this.bounds.maxX)),"number"==typeof this.bounds.minY&&(e=Math.max(e,this.bounds.minY)),"number"==typeof this.bounds.maxY&&(e=Math.min(e,this.bounds.maxY)),{x:d,y:e}},_startDrag:function(a){var b=this,c=e();b.dragStart={x:a.x,y:a.y,diffX:0,diffY:0,scrollX:c.x,scrollY:c.y},b.triggerHandler("dragstart",{pos:a})},_moveHandle:function(a){var b=this,c=b.getNewPos(a);b.triggerHandler("dragmove",{pos:c,x:c.x,y:c.y})},_stopDrag:function(a){var b=this,c=b.getNewPos(a),d=b.hasDragged()||!b.isScrolling;b.triggerHandler("dragend",{dragSuccess:d,pos:c,x:c.x,y:c.y}),b.isDragging=!1},_didPageScroll:function(){var a=this,b=e();return a.options.allowVerticalScrolling&&b.y!==a.dragStart.scrollY?!0:a.options.allowHorizontalScrolling&&b.x!==a.dragStart.scrollX?!0:!1},_didDragEnough:function(a){var b=this,c=b.options;return!c.allowVerticalScrolling&&Math.abs(a.y-b.dragStart.y)>10?!0:!c.allowHorizontalScrolling&&Math.abs(a.x-b.dragStart.x)>10?!0:!1},_eventMouseDown:function(a){this.isDragging=!0,this._startDrag({x:a.clientX,y:a.clientY})},_eventMouseMove:function(a){this.isDragging&&this._moveHandle({x:a.clientX,y:a.clientY})},_eventMouseUp:function(a){this.isDragging&&this._stopDrag({x:a.clientX,y:a.clientY})},_eventTouchStart:function(a){this.isDragging=!1,this._startDrag({x:a.touches[0].clientX,y:a.touches[0].clientY})},_eventTouchMove:function(a){var b=this;if(b.isScrolling)return!0;var c={x:a.touches[0].clientX,y:a.touches[0].clientY};if(!b.isDragging){if(b._didPageScroll())return b.isScrolling=!0,!0;if(!b._didDragEnough(c))return!0;b.isDragging=!0}a.preventDefault(),b._moveHandle(c)},_eventTouchEnd:function(a){var b=this,c={x:b.isScrolling?b.dragStart.x:a.changedTouches[0].clientX,y:b.isScrolling?b.dragStart.y:a.changedTouches[0].clientY};b._stopDrag(c),b.isScrolling=!1},_preventClickWhenDrag:function(a){this.hasDragged()&&a.preventDefault()},relase:function(){this.enabled&&(this.unbindEvents(),delete this.dragStart,delete this.isDragging,delete this.isScrolling,this.el.style.msTouchAction=d,delete this.enabled)}});return f}(window,jQuery,window.emart);