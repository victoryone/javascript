!function(a,b,c){"use strict";var d=c.$doc,e=c.$win,f=c.ui,g=c.browser,h=g.isTouch,i=f("Selectbox",{bindjQuery:"selectbox",$statics:{ON_CHANGED:"selectboxchanged"},defaults:{wrapClasses:"",disabledClass:"disabled"},initialize:function(a,b){var c=this;return c.callParent(a,b)===!1?c.release():void c._create()},_create:function(){var a=this,d=a.$el.attr("data-class")||"select_type01",e=null;a.width=parseInt(a.$el.css("width"),10),a.$selectbox=b('<div class="'+d+'"></div>').addClass(a.options.wrapClasses),a.$selectbox.insertAfter(a.$el.hide()),a._createLabel(),a._createList(),a.$selectbox.on("selectboxopen selectboxclose",function(c){c.stopPropagation();var d=a.$el.attr("data-zindex-target"),f=d?a.$el.parents(d):!1;"selectboxopen"===c.type?(a.$label.addClass("open"),a.$el.closest("div.select_wrap").addClass("on"),f&&f.addClass("on"),h&&b("body").on("touchend.selectbox",function(){a.close()})):(a.$label.removeClass("open"),a.$el.closest("div.select_wrap").removeClass("on"),f&&f.removeClass("on"),clearTimeout(e),e=null,h&&b("body").off("touchend.selectbox"))}),h?a.$selectbox.on("touchend",function(a){a.stopPropagation()}):a.$selectbox.on("focusin focusout",function(b){clearTimeout(e),e=null,"focusout"===b.type&&a.$label.hasClass("open")&&(e=setTimeout(function(){a.close()},100))}).on("keydown",function(b){b.keyCode===c.keyCode.ESCAPE&&(a.close(),a.$label.focus())}),a.$el.on("change.selectbox",function(){a.selectedIndex(this.selectedIndex,!1)}),a.$el.closest("form").on("reset",function(){a.update()}),a.update()},_createLabel:function(){var a=this;a.$label=b('<span class="select_box" tabindex="0" title="'+(a.$el.attr("title")||"셀렉트박스")+'"><span class="sel_r" style="width:190px;">&nbsp;</span></span>'),a.$label.attr({id:a.cid+"_button",role:"combobox","aria-owns":a.cid+"_menu","aria-expanded":"false","aria-haspopup":"true","aria-disabled":"false"}).on("click",".sel_r",function(b){return b.preventDefault(),b.stopPropagation(),a===i.active?void a.close():void(a.$label.hasClass(a.options.disabledClass)||(a.$label.hasClass("open")?a.close():a.open()))}),!h&&a.$label.on("keydown",function(d){13===d.keyCode?b(this).find(".sel_r").trigger("click"):d.keyCode===c.keyCode.DOWN&&(a.open(),a.$list.find(":focusable:first").focus())}),a.$label.find(".sel_r").css("width",a.width),a.$selectbox.append(a.$label)},_createList:function(){var a=this;a.$list=b('<div class="select_open" style="position:absolute;" tabindex="0"></div>'),a.$list.hide().on("click",function(){a.$list.focus()}).on("click","li>a",function(c){c.preventDefault(),c.stopPropagation(),a.selectedIndex(b(this).parent().index()),a.close(),a.$label.focus()}).on("mousedown","li>a",function(){this.focus()}),a.$list.attr({id:a.cid+"_menu",role:"listbox","aria-hidden":"true","aria-labelledby":a.cid+"_button","aria-disabled":"false"}),!h&&a.$list.on("keydown","li a",function(d){var e=b(this).parent().index(),f=a.$list.find("li"),g=f.length;switch(d.keyCode){case c.keyCode.UP:d.stopPropagation(),d.preventDefault(),f.eq(Math.max(0,e-1)).children().focus();break;case c.keyCode.DOWN:d.stopPropagation(),d.preventDefault(),f.eq(Math.min(g-1,e+1)).children().focus()}}),a.$selectbox.append(a.$list)},open:function(){var a=this,b=e.scrollTop(),c=e.height(),f=a.$selectbox.offset(),g=a.$list.height();i.active&&i.active.close(),a.$list.css("visibility","hidden").show(),f.top+g>b+c?a.$list.css("marginTop",-1*(g+a.$selectbox.height())):a.$list.css("marginTop",""),a.$list.css("visibility",""),a.$selectbox.triggerHandler("selectboxopen"),i.active=a,d.on("click.selectbox",function(){i.active&&i.active.close()}),a.$list.attr({"aria-hidden":"false"}),a.$label.attr({"aria-expanded":"true"})},close:function(){var a=this;a.$list.hide(),a.$selectbox.triggerHandler("selectboxclose"),a.$list.attr({"aria-hidden":"true"}),a.$label.attr({"aria-expanded":"false"}),d.off(".selectbox"),i.active=null},selectedIndex:function(a,b){if(0===arguments.length)return this.$el[0].selectedIndex;var c=this,d=c.$el.find("option").prop("selected",!1).removeAttr("selected").eq(a).prop("selected",!0).attr("selected","selected");b!==!1&&c.trigger("change",{selectedIndex:a}),c.$list.find("li").removeClass("on").eq(a).addClass("on"),c.$list.attr({"aria-activedescendant":c.$list.find("li").attr("id")}),c.$label.children().text(d.text())},value:function(a){var b=this;return 0===arguments.length?b.$el[0].options[b.$el[0].selectedIndex].value:void c.each(b.$el[0].options,function(c,d){return c.value==a?(b.selectedIndex(d),!1):void 0})},update:function(a){var d=this,e=d.options,f="",g=-1,h="";c.isArray(a)&&(d.el.options.length=1,c.each(a,function(a){d.el.options.add(new Option(a.text||a.value,a.value))})),c.each(c.toArray(d.$el[0].options),function(a,c){b(a).prop("selected")&&(g=c,h=a.text),f+='<li role="option" id="'+d.cid+'_item"><a href="#" data-value="'+a.value+'" data-text="'+a.text+'">'+a.text+"</a></li>"}),d.$list.empty().html("<ul>"+f+"</ul>").find("li:eq("+g+")").addClass("on"),d.$label.children().text(h),d.$el.prop("disabled")?d.$label.addClass(e.disabledClass).removeAttr("tabIndex"):d.$label.removeClass(e.disabledClass).attr("tabIndex",0)},release:function(){var a=this;a.callParent(),a.$label.off().remove(),a.$list.off().remove(),a.$el.unwrap("<div></div>"),a.$el.off("change.selectbox").show()}})}(window,jQuery,window[FRAMEWORK_NAME]);