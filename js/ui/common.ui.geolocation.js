!function(a,b){"use strict";var c=b.Class({$singleton:!0,initialize:function(b){var c=this;c.options=a.extend({},{maximumAge:6e5,timeout:6e4,enableHighAccuracy:!1},b)},_getTransKorMessage:function(a){var b="";return 0==a.code?b="알 수 없는 오류입니다. \n다시 시도해 주세요.":1==a.code?b="권한이 거부되었습니다! \n설정에서 위치서비스가 켜져있는지 확인해주세요.":2==a.code?b="위치를 사용할 수 없습니다!":3==a.code&&(b="시간 초과되었습니다. \n다시 시도해 주세요."),b},getCurrentPosition:function(b){var c=this,d=a.Deferred();return b=a.extend({},c.options,b),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){d.resolve(a)},function(a){d.reject({code:a.code,message:c._getTransKorMessage(a)})},b):d.reject({code:101,message:"죄송합니다. 브라우저가 위치서비스를 제공하지 않습니다!"}),d.promise()},watchPosition:function(b,c,d){var e=this,f=a.Deferred();return navigator.geolocation?(f.resolve("사용 가능합니다."),navigator.geolocation.watchPosition(b,c,d||e.options)):f.reject({code:101,message:"죄송합니다. 브라우저가 위치서비스를 제공하지 않습니다!"}),f.promise()},getCurrentAddress:function(){var b=this,c=a.Deferred();return b.getCurrentPosition().done(function(a){b._getCoord2Addr(a).done(function(){c.resolve.apply(c,arguments)}).fail(function(){c.reject.apply(c,arguments)})}).fail(function(a){c.reject({code:a.code,message:b._getTransKorMessage(a)})}),c.promise()},_getCoord2Addr:function(b){var d=b.coords.latitude,e=b.coords.longitude,f=c.getCoord2AddrUrl(d,e)||"",g=a.Deferred();return f?(a.ajax({url:f+"&callback=?",dataType:"jsonp"}).done(function(a){g.resolve(b,a)}).fail(function(a,b){g.reject({code:100,message:b})}),g):void g.reject({code:103,message:"지도 url이 없습니다."})}});c.getCoord2AddrUrl=function(a,b){var c=window.DAUM_MAP_APIKEY||"679bedcbb7b1dd2e77462e28eade380542e54bf0";return"http://apis.daum.net/local/geo/coord2addr?apikey="+c+"&longitude="+b+"&latitude="+a+"&output=json"},b.define("util.Geolocation",c)}(jQuery,window[LIB_NAME],window[LIB_NAME].ui);